<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="edit-form">

    <!-- Success/Error Messages -->
    <div th:if="${success}" class="alert alert-success">
        <i class="fas fa-check-circle"></i>
        <span th:text="${success}"></span>
    </div>

    <div th:if="${error}" class="alert alert-error">
        <i class="fas fa-exclamation-triangle"></i>
        <span th:text="${error}"></span>
    </div>

    <!-- Edit Product Form -->
    <div th:if="${product}">
        <form th:hx-put="@{/products/{id}(id=${product.id})}"
              hx-target="#edit-form-container"
              hx-indicator="#update-loading">

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--wa-spacing-md);">
                <div class="form-group">
                    <label class="form-label" for="title">Product Title *</label>
                    <input type="text"
                           id="title"
                           name="title"
                           class="form-control"
                           th:value="${product.title}"
                           required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="price">Price *</label>
                    <input type="number"
                           id="price"
                           name="price"
                           step="0.01"
                           class="form-control"
                           th:value="${product.price}"
                           required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="handle">Handle *</label>
                    <input type="text"
                           id="handle"
                           name="handle"
                           class="form-control"
                           th:value="${product.handle}"
                           required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="vendor">Vendor</label>
                    <input type="text"
                           id="vendor"
                           name="vendor"
                           class="form-control"
                           th:value="${product.vendor}">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="productType">Product Type</label>
                <input type="text"
                       id="productType"
                       name="productType"
                       class="form-control"
                       th:value="${product.productType}">
            </div>

            <!-- Product Details -->
            <div style="background: #f8f9fa; padding: var(--wa-spacing-md); border-radius: var(--wa-border-radius); margin: var(--wa-spacing-lg) 0;">
                <h4><i class="fas fa-info-circle"></i> Product Details</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--wa-spacing-md); font-size: var(--wa-font-size-sm);">
                    <div>
                        <strong>ID:</strong> <span th:text="${product.id}"></span>
                    </div>
                    <div>
                        <strong>Created:</strong>
                        <span th:text="${product.createdAt != null ? #temporals.format(product.createdAt, 'yyyy-MM-dd HH:mm') : 'N/A'}"></span>
                    </div>
                </div>
            </div>

            <div style="display: flex; gap: var(--wa-spacing-md); justify-content: space-between; margin-top: var(--wa-spacing-xl);">
                <a href="/" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i>
                    Back to Products
                </a>

                <button type="submit" class="btn btn-success">
                    <i class="fas fa-save"></i>
                    Update Product
                    <span id="update-loading" class="htmx-indicator">
                            <i class="fas fa-spinner fa-spin"></i>
                        </span>
                </button>
            </div>
        </form>
    </div>

    <div th:if="${!product}" class="alert alert-error">
        <i class="fas fa-exclamation-triangle"></i>
        Product not found!
    </div>
</div>
</body>
</html>